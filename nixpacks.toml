[phases.setup]
nixPkgs = ["nodejs_20"]

[variables]
COREPACK_ENABLE_DOWNLOAD_PROMPT = "0"
COREPACK_INTEGRITY_KEYS = ""
NPM_CONFIG_UPDATE_NOTIFIER = "false"

[phases.install]
cmds = ["npm install -g pnpm@9.15.9", "pnpm install --frozen-lockfile"]

[phases.build]
cmds = ["pnpm turbo build --filter=@maranatha/web"]

[start]
cmd = "cd apps/web && pnpm start"
